# Reranking: SPLADE + BGE-1.5 with Ground Truth Rewrites + BGE-Reranker-v2-m3
# For: CLOUD, FIQA (cost-effective domains)
# Expected: 0.40-0.44 nDCG@10

experiment:
  name: "rerank_splade_bge15_rewrite"
  type: "retrieval"
  description: "Hybrid SPLADE + BGE-1.5 with RRF fusion, ground truth rewrites, and BGE reranking"

data:
  domains: ["cloud", "fiqa"]
  query_mode: "rewrite"
  query_file: "data/retrieval_tasks/{domain}/{domain}_rewrite.jsonl"

retrieval:
  type: "hybrid"
  fusion_method: "rrf"  # Reciprocal Rank Fusion
  rrf_k: 60
  sparse:
    method: "splade"
    top_k: 300
  dense:
    method: "bge"
    model_name: "BAAI/bge-large-en-v1.5"
    top_k: 300

query_transform:
  enabled: false

reranking:
  enabled: true
  type: "bge"
  model_name: "BAAI/bge-reranker-v2-m3"
  top_k_candidates: 100  # Rerank top 100 from fusion
  batch_size: 32
  use_fp16: true

output:
  save_results: true
  results_dir: "experiments/{experiment_name}/{domain}"
  
metrics:
  compute: ["ndcg@5", "ndcg@10", "ndcg@20", "recall@5", "recall@10", "recall@20", "map@10", "precision@5"]
